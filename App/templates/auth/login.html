{% extends "base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-4">
    <h3>Iniciar sesión</h3>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div id="flash-messages">
          {% for category, message in messages %}
            <div class="alert alert-{{ category }}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    
    <form method="post">
      <input class="form-control mb-2" type="email" name="email" placeholder="Correo" required>
      <div style="position: relative; width: fit-content;">
        <input id="password" class="form-control mb-2" type="password" name="password" placeholder="Contraseña" required />
        <img id="togglePassword" src="{{ url_for('static', filename='vision-target.png') }}" alt="Mostrar/Ocultar" 
          style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);
          width: 20px; height: 20px; cursor: pointer;" />
      </div>
      <button class="btn btn-primary w-100">Ingresar</button>
    </form>
  </div>
</div>

<script>
  const password = document.getElementById('password');
  const toggle = document.getElementById('togglePassword');

  toggle.onclick = function() {
    if(password.type === "password") {
      password.type = "text";
    } else {
      password.type = "password";
    }
  }

  // Ocultar mensajes flash después de 3 segundos
  setTimeout(() => {
    const flashMessages = document.getElementById('flash-messages');
    if (flashMessages) {
      flashMessages.style.display = 'none';
    }
  }, 3000);
</script>
{% endblock %}
